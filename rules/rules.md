# Flutter コーディング規約

## 1. 命名規則

### ファイル名
- すべて小文字でスネークケース（`user_repository.dart`）
- ウィジェットファイルは末尾に`_widget.dart`を付ける（`custom_button_widget.dart`）
- テストファイルは末尾に`_test.dart`を付ける（`user_repository_test.dart`）
- コントローラーは末尾に`_controller.dart`を付ける（`user_controller.dart`）

### クラス名
- アッパーキャメルケース（`UserRepository`、`CustomButton`）
- ウィジェットクラスは末尾に`Widget`を付けない
- コントローラークラスは末尾に`Controller`を付ける（`UserController`）

### 変数名・メソッド名
- ローワーキャメルケース（`userName`、`fetchUserData()`）
- プライベートメンバーは`_`から始める（`_privateVariable`）
- bool値を返すメソッドは`is`、`has`、`should`などから始める

## 2. コードスタイル

### インデント
- 2スペースを使用
- 最大行長は80文字

### コメント
- コメントは必ずドキュメントコメントで記載
- 複雑なロジックには必ずコメントを付ける
- TODOコメントには理由を記載
- APIドキュメントコメントは`///`を使用

### import文
- dart:、package:、相対パスの順に記述
- exportは別ファイルにまとめる

## 3. アーキテクチャ

### プロジェクト構造
lib/
├── core/ # 共通のユーティリティ、定数など
├── features/ # 機能ごとのモジュール
├── l10n/ # 多言語化
└── main.dart
### レイヤー構造（各機能）
feature/
├── data/ # データ層
├── domain/ # ドメイン層
└── presentation/ # プレゼンテーション層

## 4. Widgetの実装

### 基本ルール
- 画面を作成する際の命名は'screen'を使用
- StatelessWidgetを優先して使用
- ウィジェットは単一責任の原則に従う
- 大きなウィジェットは小さなウィジェットに分割

### パフォーマンス
- `const`コンストラクタを積極的に使用
- 不必要なウィジェットのリビルドを避ける
- `ListView.builder()`を使用して長いリストを最適化
- パフォーマンスを向上させるために`Sliver`を使用

## 5. 状態管理

### Hook
- 一つの画面やコンポーネントでしか使用しない簡単な状態管理にはHookを使用
- スコープを適切に設定

### Riverpod
- 画面に対して複数の状態管理が必要な場合はRiverpodを使用
- スコープを適切に設定

## 6. エラーハンドリング

- すべての非同期処理でtry-catchを使用
- ユーザーフレンドリーなエラーメッセージを表示
- エラーログを適切に記録

## 7. テスト

### 単体テスト
- すべてのビジネスロジックをテスト
- モックを適切に使用

### ウィジェットテスト
- 重要なウィジェットのテストを作成
- ユーザー操作をシミュレート

### 統合テスト
- 主要なユーザーフローをテスト
- 実際のデバイスでテスト

## 8. その他

### 国際化
- すべての文字列をARBファイルで管理
- コード内にハードコードされた文字列を避ける

### アセット管理
- 画像は適切なサイズで用意
- フォントは明示的にバージョン管理

### セキュリティ
- 機密情報は.envファイルで管理
- APIキーなどをソースコードにハードコードしない